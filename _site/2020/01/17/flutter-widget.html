<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="https://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  <title>
    
      Widget çŸ¥è¯†ç‚¹ &middot; Cynine
    
  </title>

  


  <!-- CSS -->
  <link rel="stylesheet" href="/hydeout/assets/css/main.css" />
  

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface" />

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/hydeout/favicon.png" />
<link rel="shortcut icon" href="/hydeout/favicon.ico" />

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/hydeout/feed.xml" />

  <!-- Additional head bits without overriding original head -->
</head>


  <body class="post">

    <div id="sidebar">
  <header>
    <div class="site-title">
      <a href="/hydeout/">
        
          <span class="back-arrow icon"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 0h24v24H0z" fill="none"/>
  <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
</svg></span>
        
        Cynine
      </a>
    </div>
    <p class="lead">Everything I do now, is in pursuit of more perfect.</p>
  </header>
  <nav id="sidebar-nav-links">
  
    <a class="home-link "
        href="/hydeout/">Home</a>
  
  

  

  


  
    
  

  
    
  

  
    
  

  
    
  

  
    
      <a class="page-link "
          href="/hydeout/about">About</a>
    
  

  
    
  

  
    
  

  

  
    
  

  
    
  

  

  
    
  


  


  
    
  

  
    
      <a class="category-link "
          href="/hydeout/category/Developer">å¼€å‘ç¬”è®°</a>
    
  

  
    
      <a class="category-link "
          href="/hydeout/category/Flutter">Flutter</a>
    
  

  
    
      <a class="category-link "
          href="/hydeout/category/Python">Python</a>
    
  

  
    
  

  
    
      <a class="category-link "
          href="/hydeout/category/iOS">iOS</a>
    
  

  
    
  

  

  
    
  

  
    
  

  

  
    
  


  <!-- Optional additional links to insert in sidebar nav -->
</nav>


  

  <nav id="sidebar-icon-links">
  
    <a id="github-link"
       class="icon" title="Github Project" aria-label="Github Project"
       href="https://github.com/Cynine/hydeout">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 28" height="24" width="28"><path d="M12 2c6.625 0 12 5.375 12 12 0 5.297-3.437 9.797-8.203 11.391-0.609 0.109-0.828-0.266-0.828-0.578 0-0.391 0.016-1.687 0.016-3.297 0-1.125-0.375-1.844-0.812-2.219 2.672-0.297 5.484-1.313 5.484-5.922 0-1.313-0.469-2.375-1.234-3.219 0.125-0.313 0.531-1.531-0.125-3.187-1-0.313-3.297 1.234-3.297 1.234-0.953-0.266-1.984-0.406-3-0.406s-2.047 0.141-3 0.406c0 0-2.297-1.547-3.297-1.234-0.656 1.656-0.25 2.875-0.125 3.187-0.766 0.844-1.234 1.906-1.234 3.219 0 4.594 2.797 5.625 5.469 5.922-0.344 0.313-0.656 0.844-0.766 1.609-0.688 0.313-2.438 0.844-3.484-1-0.656-1.141-1.844-1.234-1.844-1.234-1.172-0.016-0.078 0.734-0.078 0.734 0.781 0.359 1.328 1.75 1.328 1.75 0.703 2.141 4.047 1.422 4.047 1.422 0 1 0.016 1.937 0.016 2.234 0 0.313-0.219 0.688-0.828 0.578-4.766-1.594-8.203-6.094-8.203-11.391 0-6.625 5.375-12 12-12zM4.547 19.234c0.031-0.063-0.016-0.141-0.109-0.187-0.094-0.031-0.172-0.016-0.203 0.031-0.031 0.063 0.016 0.141 0.109 0.187 0.078 0.047 0.172 0.031 0.203-0.031zM5.031 19.766c0.063-0.047 0.047-0.156-0.031-0.25-0.078-0.078-0.187-0.109-0.25-0.047-0.063 0.047-0.047 0.156 0.031 0.25 0.078 0.078 0.187 0.109 0.25 0.047zM5.5 20.469c0.078-0.063 0.078-0.187 0-0.297-0.063-0.109-0.187-0.156-0.266-0.094-0.078 0.047-0.078 0.172 0 0.281s0.203 0.156 0.266 0.109zM6.156 21.125c0.063-0.063 0.031-0.203-0.063-0.297-0.109-0.109-0.25-0.125-0.313-0.047-0.078 0.063-0.047 0.203 0.063 0.297 0.109 0.109 0.25 0.125 0.313 0.047zM7.047 21.516c0.031-0.094-0.063-0.203-0.203-0.25-0.125-0.031-0.266 0.016-0.297 0.109s0.063 0.203 0.203 0.234c0.125 0.047 0.266 0 0.297-0.094zM8.031 21.594c0-0.109-0.125-0.187-0.266-0.172-0.141 0-0.25 0.078-0.25 0.172 0 0.109 0.109 0.187 0.266 0.172 0.141 0 0.25-0.078 0.25-0.172zM8.937 21.438c-0.016-0.094-0.141-0.156-0.281-0.141-0.141 0.031-0.234 0.125-0.219 0.234 0.016 0.094 0.141 0.156 0.281 0.125s0.234-0.125 0.219-0.219z"></path>
</svg>

    </a>
    <a id="github-download-link"
       class="icon" title="Download" aria-label="Download"
       href="https://github.com/Cynine/hydeout/archive/v4.0.2.zip">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>
    </a>
  

  <a id="subscribe-link"
     class="icon" title="Subscribe" aria-label="Subscribe"
     href="/hydeout/feed.xml">
    <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <circle cx="6.18" cy="17.82" r="2.18"/>
    <path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/>
</svg>
  </a>

  
  
  
  

  
    <a id="tags-link"
       class="icon"
       title="Tags" aria-label="Tags"
       href="/hydeout/tags">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
    </a>
  

  
    <a id="search-link"
       class="icon"
       title="Search" aria-label="Search"
       href="/hydeout/search">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>
    </a>
  

  <!-- Optional additional links to insert for icons links -->
</nav>

  <p>
  &copy; 2020.
  <a href="/hydeout/LICENSE.md">MIT License.</a>
</p>

</div>

    <main class="container">
      <header>
  <h1 class="post-title">Widget çŸ¥è¯†ç‚¹</h1>
</header>
<div class="content">
  <div class="post-meta">
  <span class="post-date">17 Jan 2020</span>
  <span class="post-categories">
    
      &bull;

      
      
      

      
        <a href="/hydeout/category/Flutter">
          Flutter
        </a>
      
    
  </span>
</div>


  <div class="post-body">
    <p><img src="https://flutter.dev/assets/resources/diagram-layercake-73512ded89f7df8301f622c66178633f04f91187822daf1ddff0d54b2d2676dc.png" alt="å›¾1 Flutter æ¶æ„å›¾" /></p>

<h3 id="é—®é¢˜">é—®é¢˜</h3>

<ul>
  <li>ä»€ä¹ˆæ˜¯ Widget ?</li>
  <li>å¦‚ä½•ç†è§£ Widget ã€Element å’Œ RenderObject è¿™ä¸‰ä¸ªæ¦‚å¿µï¼Ÿå®ƒä»¬ä¹‹é—´æ˜¯ä¸€ä¸€å¯¹åº”çš„å—ï¼Ÿèƒ½å¦åœ¨ Android/iOS/Web ä¸­æ‰¾åˆ°å¯¹åº”çš„æ¦‚å¿µå‘¢ï¼Ÿ</li>
</ul>

<p>åœ¨ iOS ä¸­ UIView ç›¸å½“äº Element, CALayer ç›¸å½“äº RenderObject. UIKit æ²¡æœ‰ Widget è¿™ä¸ªæ¦‚å¿µã€‚</p>

<h3 id="æ¦‚å¿µ">æ¦‚å¿µ</h3>

<p><strong>Flutter çš„æ ¸å¿ƒè®¾è®¡æ€æƒ³æ˜¯â€ä¸€åˆ‡ Widgetâ€</strong>ã€‚</p>

<p>Widget æ˜¯ Flutter åŠŸèƒ½çš„æŠ½è±¡æè¿°ï¼Œæ˜¯è§†å›¾çš„é…ç½®ä¿¡æ¯ï¼ŒåŒæ ·ä¹Ÿæ˜¯æ•°æ®çš„æ˜ å°„ï¼Œæ˜¯ Flutter å¼€å‘æ¡†æ¶ä¸­æœ€åŸºæœ¬çš„æ¦‚å¿µã€‚å¦‚ View, View Controller, Activity, Application, Layoutç­‰ï¼Œåœ¨ Flutter ä¸­éƒ½æ˜¯ Widgetã€‚</p>

<h3 id="widget-æ¸²æŸ“è¿‡ç¨‹">Widget æ¸²æŸ“è¿‡ç¨‹</h3>

<p>Flutter å°†è§†å›¾æ ‘çš„æ¦‚å¿µè¿›è¡Œäº†æ‰©å±•ï¼ŒæŠŠè§†å›¾æ•°æ®çš„ç»„ç»‡å’Œæ¸²æŸ“æŠ½è±¡ä¸ºä¸‰éƒ¨åˆ†ï¼Œå³ Widgetï¼ŒElement å’Œ RenderObjectã€‚è¿™ä¸‰éƒ¨åˆ†ä¹‹é—´çš„å…³ç³»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<p><img src="https://static001.geekbang.org/resource/image/b4/c9/b4ae98fe5b4c9a7a784c916fd140bbc9.png" alt="img" /></p>

<h3 id="widget">Widget</h3>

<p>Widget æ˜¯ Flutter ä¸–ç•Œé‡Œå¯¹è§†å›¾çš„ä¸€ç§ç»“æ„åŒ–æè¿°ï¼Œå¯çœ‹ä½œå‰ç«¯ä¸­çš„â€œæ§ä»¶â€æˆ–â€œç»„ä»¶â€ã€‚Widget æ˜¯æ§ä»¶å®ç°çš„åŸºæœ¬é€»è¾‘å•ä½ï¼Œé‡Œé¢å­˜å‚¨çš„æ˜¯æœ‰å…³è§†å›¾æ¸²æŸ“çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¸ƒå±€ã€æ¸²æŸ“å±æ€§ã€äº‹ä»¶å“åº”ä¿¡æ¯ç­‰ã€‚</p>

<p>åœ¨é¡µé¢æ¸²æŸ“ä¸Šï¼ŒFlutter å°†â€œSimple is bestâ€è¿™ä¸€ç†å¿µåšåˆ°äº†æè‡´ã€‚Flutter å°† Widget è®¾è®¡æˆä¸å¯å˜çš„ï¼Œæ‰€ä»¥å½“è§†å›¾æ¸²æŸ“çš„é…ç½®ä¿¡æ¯å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒFlutter ä¼šé€‰æ‹©é‡å»º Widget æ ‘çš„æ–¹å¼è¿›è¡Œæ•°æ®æ›´æ–°ï¼Œä»¥æ•°æ®é©±åŠ¨ UI æ„å»ºçš„æ–¹å¼ç®€å•é«˜æ•ˆã€‚ä½†è¿™æ ·åšçš„ç¼ºç‚¹æ˜¯ï¼Œå› ä¸ºæ¶‰åŠåˆ°å¤§é‡å¯¹è±¡çš„é”€æ¯å’Œé‡å»ºï¼Œæ‰€ä»¥ä¼šå¯¹åƒåœ¾å›æ”¶é€ æˆå‹åŠ›ã€‚ä¸è¿‡ï¼ŒWidget æœ¬èº«å¹¶ä¸æ¶‰åŠå®é™…æ¸²æŸ“ä½å›¾ï¼Œæ‰€ä»¥å®ƒåªæ˜¯ä¸€ä»½è½»é‡çº§çš„æ•°æ®ç»“æ„ï¼Œé‡å»ºçš„æˆæœ¬å¾ˆä½ã€‚</p>

<p>å¦å¤–ï¼Œç”±äº Widget çš„ä¸å¯å˜æ€§ï¼Œå¯ä»¥ä»¥è¾ƒä½æˆæœ¬è¿›è¡Œæ¸²æŸ“èŠ‚ç‚¹å¤ç”¨ï¼Œå› æ­¤åœ¨ä¸€ä¸ªçœŸå®çš„æ¸²æŸ“æ ‘ä¸­å¯èƒ½å­˜åœ¨ä¸åŒçš„ Widget å¯¹åº”åŒä¸€ä¸ªæ¸²æŸ“èŠ‚ç‚¹çš„æƒ…å†µï¼Œè¿™æ— ç–‘åˆé™ä½äº†é‡å»º UI çš„æˆæœ¬ã€‚</p>

<h3 id="element">Element</h3>

<p>Element æ˜¯ Widget çš„ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡ï¼Œå®ƒæ‰¿è½½äº†è§†å›¾æ„å»ºçš„ä¸Šä¸‹æ–‡æ•°æ®ï¼Œæ˜¯è¿æ¥ç»“æ„åŒ–çš„é…ç½®ä¿¡æ¯åˆ°å®Œæˆæœ€ç»ˆæ¸²æŸ“çš„æ¡¥æ¢ã€‚</p>

<p>Flutter æ¸²æŸ“è¿‡ç¨‹ï¼Œå¯ä»¥åˆ†ä¸ºè¿™ä¹ˆä¸‰æ­¥ï¼š</p>
<ul>
  <li>é¦–å…ˆï¼Œé€šè¿‡ Widget æ ‘ç”Ÿæˆå¯¹åº”çš„ Element æ ‘ï¼›</li>
  <li>ç„¶åï¼Œåˆ›å»ºç›¸åº”çš„ RenderObject å¹¶å…³è”åˆ° Element.renderObject å±æ€§ä¸Šï¼›</li>
  <li>æœ€åï¼Œæ„å»ºæˆ RenderObject æ ‘ï¼Œä»¥å®Œæˆæœ€ç»ˆçš„æ¸²æŸ“ã€‚</li>
</ul>

<p>å¯ä»¥çœ‹åˆ°ï¼ŒElement åŒæ—¶æŒæœ‰ Widget å’Œ RenderObjectã€‚è€Œæ— è®ºæ˜¯ Widget è¿˜æ˜¯ Elementï¼Œå…¶å®éƒ½ä¸è´Ÿè´£æœ€åçš„æ¸²æŸ“ï¼Œåªè´Ÿè´£å‘å·æ–½ä»¤ï¼ŒçœŸæ­£å»å¹²æ´»å„¿çš„åªæœ‰ RenderObjectã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ Widget å‘½ä»¤ RenderObject å»å¹²æ´»å‘¢ï¼Ÿå› ä¸ºè¿™æ ·ä¼šæå¤§å¢åŠ æ¸²æŸ“å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚å› ä¸º Widget å…·æœ‰ä¸å¯å˜æ€§ï¼Œä½† Element å´æ˜¯å¯å˜çš„ã€‚å®é™…ä¸Šï¼ŒElement æ ‘è¿™ä¸€å±‚å°† Widget æ ‘çš„å˜åŒ–ï¼ˆç±»ä¼¼ React è™šæ‹Ÿ DOM diffï¼‰åšäº†æŠ½è±¡ï¼Œå¯ä»¥åªå°†çœŸæ­£éœ€è¦ä¿®æ”¹çš„éƒ¨åˆ†åŒæ­¥åˆ°çœŸå®çš„ RenderObject æ ‘ä¸­ï¼Œæœ€å¤§ç¨‹åº¦é™ä½å¯¹çœŸå®æ¸²æŸ“è§†å›¾çš„ä¿®æ”¹ï¼Œæé«˜æ¸²æŸ“æ•ˆç‡ï¼Œè€Œä¸æ˜¯é”€æ¯æ•´ä¸ªæ¸²æŸ“è§†å›¾æ ‘é‡å»ºã€‚è¿™ï¼Œå°±æ˜¯ Element æ ‘å­˜åœ¨çš„æ„ä¹‰ã€‚</p>

<h3 id="renderobject">RenderObject</h3>

<p>RenderObject æ˜¯ä¸»è¦è´Ÿè´£å®ç°è§†å›¾æ¸²æŸ“çš„å¯¹è±¡ã€‚æ¸²æŸ“å¯¹è±¡æ ‘åœ¨ Flutter çš„å±•ç¤ºè¿‡ç¨‹åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼Œå³å¸ƒå±€ã€ç»˜åˆ¶ã€åˆæˆå’Œæ¸²æŸ“ã€‚å…¶ä¸­ï¼Œå¸ƒå±€å’Œç»˜åˆ¶åœ¨ RenderObject ä¸­å®Œæˆï¼ŒFlutter é‡‡ç”¨æ·±åº¦ä¼˜å…ˆæœºåˆ¶éå†æ¸²æŸ“å¯¹è±¡æ ‘ï¼Œç¡®å®šæ ‘ä¸­å„ä¸ªå¯¹è±¡çš„ä½ç½®å’Œå°ºå¯¸ï¼Œå¹¶æŠŠå®ƒä»¬ç»˜åˆ¶åˆ°ä¸åŒçš„å›¾å±‚ä¸Šã€‚ç»˜åˆ¶å®Œæ¯•åï¼Œåˆæˆå’Œæ¸²æŸ“çš„å·¥ä½œåˆ™äº¤ç»™ Skia æå®šã€‚</p>

<p><strong>Flutter é€šè¿‡å¼•å…¥ Widgetã€Element ä¸ RenderObject è¿™ä¸‰ä¸ªæ¦‚å¿µï¼ŒæŠŠåŸæœ¬ä»è§†å›¾æ•°æ®åˆ°è§†å›¾æ¸²æŸ“çš„å¤æ‚æ„å»ºè¿‡ç¨‹æ‹†åˆ†å¾—æ›´ç®€å•ã€ç›´æ¥ï¼Œåœ¨æ˜“äºé›†ä¸­æ²»ç†çš„åŒæ—¶ï¼Œä¿è¯äº†è¾ƒé«˜çš„æ¸²æŸ“æ•ˆç‡ã€‚</strong></p>

<h3 id="renderobjectwidget">RenderObjectWidget</h3>

<p>åœ¨ Flutter ä¸­ï¼Œå¸ƒå±€å’Œç»˜åˆ¶å·¥ä½œå®é™…ä¸Šæ˜¯åœ¨ Widget çš„å¦ä¸€ä¸ªå­ç±» RenderObjectWidget å†…å®Œæˆçš„ã€‚</p>

<p>RenderObjectWidget çš„æºç å¦‚ä¸‹:</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RenderObjectWidget</span> <span class="kd">extends</span> <span class="n">Widget</span> <span class="o">{</span>
  <span class="nd">@override</span>
  <span class="n">RenderObjectElement</span> <span class="n">createElement</span><span class="o">();</span>
  <span class="nd">@protected</span>
  <span class="n">RenderObject</span> <span class="n">createRenderObject</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">);</span>
  <span class="nd">@protected</span>
  <span class="kt">void</span> <span class="n">updateRenderObject</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">,</span> <span class="n">covariant</span> <span class="n">RenderObject</span> <span class="n">renderObject</span><span class="o">)</span> <span class="o">{</span> <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>
<p>RenderObjectWidget æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚æˆ‘ä»¬é€šè¿‡æºç å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªç±»ä¸­åŒæ—¶æ‹¥æœ‰åˆ›å»º Elementã€RenderObjectï¼Œä»¥åŠæ›´æ–° RenderObject çš„æ–¹æ³•ã€‚å®é™…ä¸Šï¼ŒRenderObjectWidget æœ¬èº«å¹¶ä¸è´Ÿè´£è¿™äº›å¯¹è±¡çš„åˆ›å»ºä¸æ›´æ–°ã€‚</p>

<p>å¯¹äº Element çš„åˆ›å»ºï¼ŒFlutter ä¼šåœ¨éå† Widget æ ‘æ—¶ï¼Œè°ƒç”¨ createElement å»åŒæ­¥ Widget è‡ªèº«é…ç½®ï¼Œä»è€Œç”Ÿæˆå¯¹åº”èŠ‚ç‚¹çš„ Element å¯¹è±¡ã€‚è€Œå¯¹äº RenderObject çš„åˆ›å»ºä¸æ›´æ–°ï¼Œå…¶å®æ˜¯åœ¨ RenderObjectElement ç±»ä¸­å®Œæˆçš„ã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RenderObjectElement</span> <span class="kd">extends</span> <span class="n">Element</span> <span class="o">{</span>
  <span class="n">RenderObject</span> <span class="n">_renderObject</span><span class="o">;</span>

  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">mount</span><span class="o">(</span><span class="n">Element</span> <span class="n">parent</span><span class="o">,</span> <span class="kd">dynamic</span> <span class="n">newSlot</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">super</span><span class="o">.</span><span class="na">mount</span><span class="o">(</span><span class="n">parent</span><span class="o">,</span> <span class="n">newSlot</span><span class="o">);</span>
    <span class="n">_renderObject</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="na">createRenderObject</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="n">attachRenderObject</span><span class="o">(</span><span class="n">newSlot</span><span class="o">);</span>
    <span class="n">_dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>
   
  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">update</span><span class="o">(</span><span class="n">covariant</span> <span class="n">RenderObjectWidget</span> <span class="n">newWidget</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">super</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">newWidget</span><span class="o">);</span>
    <span class="n">widget</span><span class="o">.</span><span class="na">updateRenderObject</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">renderObject</span><span class="o">);</span>
    <span class="n">_dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>åœ¨ Element åˆ›å»ºå®Œæ¯•åï¼ŒFlutter ä¼šè°ƒç”¨ Element çš„ mount æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•é‡Œï¼Œä¼šå®Œæˆä¸ä¹‹å…³è”çš„ RenderObject å¯¹è±¡çš„åˆ›å»ºï¼Œä»¥åŠä¸æ¸²æŸ“æ ‘çš„æ’å…¥å·¥ä½œï¼Œæ’å…¥åˆ°æ¸²æŸ“æ ‘åçš„ Element å°±å¯ä»¥æ˜¾ç¤ºåˆ°å±å¹•ä¸­äº†ã€‚</p>

<p>å¦‚æœ Widget çš„é…ç½®æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œé‚£ä¹ˆæŒæœ‰è¯¥ Widget çš„ Element èŠ‚ç‚¹ä¹Ÿä¼šè¢«æ ‡è®°ä¸º dirtyã€‚åœ¨ä¸‹ä¸€ä¸ªå‘¨æœŸçš„ç»˜åˆ¶æ—¶ï¼ŒFlutter å°±ä¼šè§¦å‘ Element æ ‘çš„æ›´æ–°ï¼Œå¹¶ä½¿ç”¨æœ€æ–°çš„ Widget æ•°æ®æ›´æ–°è‡ªèº«ä»¥åŠå…³è”çš„ RenderObject å¯¹è±¡ï¼Œæ¥ä¸‹æ¥ä¾¿ä¼šè¿›å…¥ Layout å’Œ Paint çš„æµç¨‹ã€‚è€ŒçœŸæ­£çš„ç»˜åˆ¶å’Œå¸ƒå±€è¿‡ç¨‹ï¼Œåˆ™å®Œå…¨äº¤ç”± RenderObject å®Œæˆï¼š</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RenderObject</span> <span class="kd">extends</span> <span class="n">AbstractNode</span> <span class="k">with</span> <span class="n">DiagnosticableTreeMixin</span> <span class="kd">implements</span> <span class="n">HitTestTarget</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="kt">void</span> <span class="n">layout</span><span class="o">(</span><span class="n">Constraints</span> <span class="n">constraints</span><span class="o">,</span> <span class="o">{</span> <span class="kt">bool</span> <span class="n">parentUsesSize</span> <span class="o">=</span> <span class="kc">false</span> <span class="o">})</span> <span class="o">{...}</span>
  
  <span class="kt">void</span> <span class="n">paint</span><span class="o">(</span><span class="n">PaintingContext</span> <span class="n">context</span><span class="o">,</span> <span class="n">Offset</span> <span class="n">offset</span><span class="o">)</span> <span class="o">{</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>å¸ƒå±€å’Œç»˜åˆ¶å®Œæˆåï¼Œæ¥ä¸‹æ¥çš„äº‹æƒ…å°±äº¤ç»™ Skia äº†ã€‚åœ¨ VSync ä¿¡å·åŒæ­¥æ—¶ç›´æ¥ä»æ¸²æŸ“æ ‘åˆæˆ Bitmapï¼Œç„¶åæäº¤ç»™ GPUã€‚</p>

<h3 id="æ€»ç»“">æ€»ç»“</h3>

<p>Flutter ä¸­è§†å›¾æ•°æ®çš„ç»„ç»‡å’Œæ¸²æŸ“æŠ½è±¡çš„ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ: Widget ã€Element å’Œ RenderObjectã€‚</p>

<p>Widget æ˜¯ Flutter ä¸–ç•Œé‡Œå¯¹è§†å›¾çš„ä¸€ç§ç»“æ„åŒ–æè¿°ï¼Œé‡Œé¢å­˜å‚¨çš„æ˜¯æœ‰å…³è§†å›¾æ¸²æŸ“çš„é…ç½®ä¿¡æ¯ï¼›Element åˆ™æ˜¯ Widget çš„ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡ï¼Œå°† Widget æ ‘çš„å˜åŒ–åšäº†æŠ½è±¡ï¼Œèƒ½å¤Ÿåšåˆ°åªå°†çœŸæ­£éœ€è¦ä¿®æ”¹çš„éƒ¨åˆ†åŒæ­¥åˆ°çœŸå®çš„ Render Object æ ‘ä¸­ï¼Œæœ€å¤§ç¨‹åº¦åœ°ä¼˜åŒ–äº†ä»ç»“æ„åŒ–çš„é…ç½®ä¿¡æ¯åˆ°å®Œæˆæœ€ç»ˆæ¸²æŸ“çš„è¿‡ç¨‹ï¼›è€Œ RenderObjectï¼Œåˆ™è´Ÿè´£å®ç°è§†å›¾çš„æœ€ç»ˆå‘ˆç°ï¼Œé€šè¿‡å¸ƒå±€ã€ç»˜åˆ¶å®Œæˆç•Œé¢çš„å±•ç¤ºã€‚</p>

    



<div class="post-tags">
  
    
    <a href="/hydeout/tags#widget">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">Widget</span>
    </a>
  
</div>
  </div>

  
  <section class="comments">
    <h2>Comments</h2>
    
  <div id="disqus_thread">
    <button class="disqus-load" onClick="loadDisqusComments()">
      Load Comments
    </button>
  </div>
  <script>

  /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW
  *  TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT:s
  *  https://disqus.com/admin/universalcode/#configuration-variables
  */
  var disqus_config = function () {
    this.page.url = "http://localhost:4000/hydeout/2020/01/17/flutter-widget.html";
    this.page.identifier = "" ||
                           "http://localhost:4000/hydeout/2020/01/17/flutter-widget.html";
  }
  function loadDisqusComments() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//hydeout.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  }
  </script>
  <noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript">comments powered by Disqus</a>.
  </noscript>



  </section>

  <section class="related">
  <h2>Related Posts</h2>
  <ul class="posts-list">
    
      <li>
        <h3>
          <a href="/hydeout/2020/03/01/block.html">
            Blocks
            <small>01 Mar 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/hydeout/2020/01/14/ios-map.html">
            iOS å¼€å‘èˆ†å›¾
            <small>14 Jan 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/hydeout/2020/01/13/swift-project-open-libs.html">
            ğŸš€ Swift é¡¹ç›®ä¸­çš„å¼€æºåº“
            <small>13 Jan 2020</small>
          </a>
        </h3>
      </li>
    
  </ul>
</section>

</div>

    </main>

    <!-- Optional footer content -->

  </body>
</html>
